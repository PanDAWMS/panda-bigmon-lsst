{% extends "_base_lsst.html" %}{% load url from future %}
{% block page_title %} {{ viewParams.MON_VO }} PanDA Activity Summary{% endblock %}
{% block title %} <a href="{% url 'index' %}">{{ viewParams.MON_VO }} PanDA monitor</a>{% endblock %}
{% block subtitle %}PanDA Activity Summary{{ viewParams.selection|safe }}{% endblock %}
{% block body %}
{% if errors_GET %}
{% if errors_GET.noparams %}
	<div><span style="color: orange; font-weight: bold;">Query warning.</span> {{errors_GET.noparams}}</div>
{% else %}
{% if errors_GET.startdate %}<div><span style="color: orange; font-weight: bold;">Query error.</span> {{errors_GET.startdate}}</div>{% endif %}
{% if errors_GET.enddate %}<div><span style="color: orange; font-weight: bold;">Query error.</span> {{errors_GET.enddate}}</div>{% endif %}
{% if errors_GET.ndays %}<div><span style="color: orange; font-weight: bold;">Query error.</span> {{errors_GET.ndays}}</div>{% endif %}
{% endif %}
{% endif %}
{% if starttime %}<div><span style="color: navy; font-weight: bold;">starttime:</span> {{starttime}} </div>{% endif %}
{% if endtime %}<div><span style="color: navy; font-weight: bold;">endtime:</span> {{endtime}} </div>{% endif %}
{% if nhours %}<div><span style="color: navy; font-weight: bold;">nhours:</span> {{nhours}} </div>{% endif %}
{% if GETparams %}
	<div><span style="color: navy; font-weight: bold;">GET parameters:</span> 
	<table>	
		{% for key,value in GETparams.items %}
			<tr>
				<td>{{key}}</td>
				<td>{{value}}</td>
			</tr>
		{% endfor %}
		</table>
	</div>
{% endif %}
{% if query %}
	<div><span style="color: navy; font-weight: bold;">Query:</span> <br/>
	<table>	
		{% for key,value in query.items %}
			<tr>
				<td>{{key}}</td>
				<td>{{value}}</td>
			</tr>
		{% endfor %}
		</table>
	</div>
{% endif %}
{% if data %}
<br/><br/>
<table>
<theader>
<tr>
<th>Cloud</th>
<th>ATLAS site</th>
<th>MCP Cloud</th>
<th>PanDA Resource</th>
<th>Core count</th>
<th>Status / Comment</th>
<th>defined</th>
<th>waiting</th>
<th>pending</th>
<th>assigned</th>
<th>throttled</th>
<th>activated</th>
<th>sent</th>
<th>starting</th>
<th>running</th>
<th>holding</th>
<th>transferring</th>
<th>finished</th>
<th>failed</th>
<th>cancelled</th>
<th>merging</th>
</tr>
</theader>
{% for item in data %}
<tr>
<td>{{item.cloud}}</td>
<td>{{item.atlas_site}}</td>
<td>{{item.mcp_cloud}}</td>
<td>{{item.computingsite}}</td>
<td>{{item.status}} / {{item.comment|default_if_none:"&mdash;"}}</td>
<td>{{item.corecount|default_if_none:"&mdash;"}}</td>
<td>{{item.defined|default_if_none:"&mdash;"}}</td>
<td>{{item.waiting|default_if_none:"&mdash;"}}</td>
<td>{{item.pending|default_if_none:"&mdash;"}}</td>
<td>{{item.assigned|default_if_none:"&mdash;"}}</td>
<td>{{item.throttled|default_if_none:"&mdash;"}}</td>
<td>{{item.activated|default_if_none:"&mdash;"}}</td>
<td>{{item.sent|default_if_none:"&mdash;"}}</td>
<td>{{item.starting|default_if_none:"&mdash;"}}</td>
<td>{{item.running|default_if_none:"&mdash;"}}</td>
<td>{{item.holding|default_if_none:"&mdash;"}}</td>
<td>{{item.transferring|default_if_none:"&mdash;"}}</td>
<td>{{item.finished|default_if_none:"&mdash;"}}</td>
<td>{{item.failed|default_if_none:"&mdash;"}}</td>
<td>{{item.cancelled|default_if_none:"&mdash;"}}</td>
<td>{{item.merging|default_if_none:"&mdash;"}}</td>
</tr>
{% endfor %}
</table>
{% else %}
<div><span style="color: orange; font-weight: bold;">Result warning.</span> No entry satisfied your query parameters.</div>
{% endif %}
{% endblock %}


